{
  "comments": [
    {
      "key": {
        "uuid": "7a96c907_e05f810d",
        "filename": "openflowplugin-api/src/main/java/org/opendaylight/openflowplugin/api/openflow/md/core/session/SessionContext.java",
        "patchSetId": 12
      },
      "lineNbr": 160,
      "author": {
        "id": 65
      },
      "writtenOn": "2015-03-03T14:45:33Z",
      "side": 1,
      "message": "whitespaces",
      "revId": "f48479d12e3967510599df8fb9bfbb285d8bdf7b",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5a93c517_fa735713",
        "filename": "openflowplugin-api/src/main/java/org/opendaylight/openflowplugin/api/openflow/md/core/session/SessionContext.java",
        "patchSetId": 12
      },
      "lineNbr": 160,
      "author": {
        "id": 556
      },
      "writtenOn": "2015-03-12T14:54:04Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "7a96c907_e05f810d",
      "revId": "f48479d12e3967510599df8fb9bfbb285d8bdf7b",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7a96c907_005dcd14",
        "filename": "openflowplugin-api/src/main/java/org/opendaylight/openflowplugin/api/openflow/md/core/session/SessionContext.java",
        "patchSetId": 12
      },
      "lineNbr": 165,
      "author": {
        "id": 65
      },
      "writtenOn": "2015-03-03T14:45:33Z",
      "side": 1,
      "message": "whitespaces",
      "revId": "f48479d12e3967510599df8fb9bfbb285d8bdf7b",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5a93c517_9a601337",
        "filename": "openflowplugin-api/src/main/java/org/opendaylight/openflowplugin/api/openflow/md/core/session/SessionContext.java",
        "patchSetId": 12
      },
      "lineNbr": 165,
      "author": {
        "id": 556
      },
      "writtenOn": "2015-03-12T14:54:04Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "7a96c907_005dcd14",
      "revId": "f48479d12e3967510599df8fb9bfbb285d8bdf7b",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7a96c907_dde2729f",
        "filename": "openflowplugin/src/main/java/org/opendaylight/openflowplugin/openflow/md/core/session/OFRoleManager.java",
        "patchSetId": 12
      },
      "lineNbr": 47,
      "author": {
        "id": 65
      },
      "writtenOn": "2015-03-03T14:45:33Z",
      "side": 1,
      "message": "is there any specific reason for using this limit ?",
      "revId": "f48479d12e3967510599df8fb9bfbb285d8bdf7b",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7a96c907_c0d7e549",
        "filename": "openflowplugin/src/main/java/org/opendaylight/openflowplugin/openflow/md/core/session/OFRoleManager.java",
        "patchSetId": 12
      },
      "lineNbr": 47,
      "author": {
        "id": 556
      },
      "writtenOn": "2015-03-03T14:53:37Z",
      "side": 1,
      "message": "No, this might be configurable later. But 42 is probably the coolest number regarding Douglas Adams.",
      "parentUuid": "7a96c907_dde2729f",
      "revId": "f48479d12e3967510599df8fb9bfbb285d8bdf7b",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7a96c907_607a9178",
        "filename": "openflowplugin/src/main/java/org/opendaylight/openflowplugin/openflow/md/core/session/RolePushTask.java",
        "patchSetId": 12
      },
      "lineNbr": 88,
      "author": {
        "id": 65
      },
      "writtenOn": "2015-03-03T14:45:33Z",
      "side": 1,
      "message": "I think this is not good idea, because reading generation-id from device will introduce latency in fail-over. Also looks like this operation is done for each connected switch, that is not required, given that openflow assume that all the switches are connected to all the controller, so ideally same generation-id should be propagated to every switch . I would suggest to store generation-id in data store and read it from there. This is optimization task, so probably we can push this change in separate patch.",
      "revId": "f48479d12e3967510599df8fb9bfbb285d8bdf7b",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7a96c907_80123d07",
        "filename": "openflowplugin/src/main/java/org/opendaylight/openflowplugin/openflow/md/core/session/RolePushTask.java",
        "patchSetId": 12
      },
      "lineNbr": 88,
      "author": {
        "id": 556
      },
      "writtenOn": "2015-03-03T15:37:20Z",
      "side": 1,
      "message": "What I tried to solve there was that in one moment all controllers will try to set role. In case there are 3 controllers and one of them succeeds then the other 2 have to ask for current generationId and retry. Then again only one would succeed and the last must retry. Writing current generationId of each node into dataStore/operational is probably much faster but does not eliminate conflicts. In order to minimize collisions we have following:\n\n- order of devices (when propagating a role) is randomized using priorityQueue with semi-random priority\n- a controller always asks for generationId before requesting role\n- in case of conflict (replied generationId is used but consequent RoleRequest fails because some other controller was faster) this node is enqueued again and unlucky controller tries another node from queue. \n\nThis critical scenario happens at the beginning - all controllers are up and running and in one moment connected to network (e.g. mininet) - now all controllers have effectively the equal-role by default and all are trying to change it according to shard state.\n\nLater on when membership of master role changes in shard then only the new master controller needs to announce this role to nodes - old master controller(s) will be automatically demoted to slave role (no need to tell device, just change internal state).\n\nArguments for optimizing role propagation via dataStore:\n- the process will be faster in general\n\nArguments against use of dataStore here:\n- generationId should not be exposed\n- we need to design simple and deterministic fail-over scenario\n- this will complicate the mechanism and might introduce deadlock by involving datastore and md-sal-notification threads for unlimited time\n\n\nNow it would be great to see those two approaches in action and test them in clustered environment. I guess dataStore must be faster. But I do not believe it would be like order of magnitude faster.",
      "parentUuid": "7a96c907_607a9178",
      "revId": "f48479d12e3967510599df8fb9bfbb285d8bdf7b",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7a96c907_fddf2ed4",
        "filename": "openflowplugin/src/main/java/org/opendaylight/openflowplugin/openflow/md/core/session/SessionContextOFImpl.java",
        "patchSetId": 12
      },
      "lineNbr": 52,
      "author": {
        "id": 65
      },
      "writtenOn": "2015-03-03T14:45:33Z",
      "side": 1,
      "message": "please remove these whitespaces",
      "revId": "f48479d12e3967510599df8fb9bfbb285d8bdf7b",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5a93c517_ba65cf46",
        "filename": "openflowplugin/src/main/java/org/opendaylight/openflowplugin/openflow/md/core/session/SessionContextOFImpl.java",
        "patchSetId": 12
      },
      "lineNbr": 52,
      "author": {
        "id": 556
      },
      "writtenOn": "2015-03-12T14:54:04Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "7a96c907_fddf2ed4",
      "revId": "f48479d12e3967510599df8fb9bfbb285d8bdf7b",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7a96c907_9df06a68",
        "filename": "openflowplugin/src/main/java/org/opendaylight/openflowplugin/openflow/md/core/session/SessionContextOFImpl.java",
        "patchSetId": 12
      },
      "lineNbr": 237,
      "author": {
        "id": 65
      },
      "writtenOn": "2015-03-03T14:45:33Z",
      "side": 1,
      "message": "whitespaces",
      "revId": "f48479d12e3967510599df8fb9bfbb285d8bdf7b",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5a93c517_5a5a8b84",
        "filename": "openflowplugin/src/main/java/org/opendaylight/openflowplugin/openflow/md/core/session/SessionContextOFImpl.java",
        "patchSetId": 12
      },
      "lineNbr": 237,
      "author": {
        "id": 556
      },
      "writtenOn": "2015-03-12T14:54:04Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "7a96c907_9df06a68",
      "revId": "f48479d12e3967510599df8fb9bfbb285d8bdf7b",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7a96c907_bdf52658",
        "filename": "openflowplugin/src/main/java/org/opendaylight/openflowplugin/openflow/md/core/session/SessionContextOFImpl.java",
        "patchSetId": 12
      },
      "lineNbr": 242,
      "author": {
        "id": 65
      },
      "writtenOn": "2015-03-03T14:45:33Z",
      "side": 1,
      "message": "whitespaces",
      "revId": "f48479d12e3967510599df8fb9bfbb285d8bdf7b",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5a93c517_7a5f4773",
        "filename": "openflowplugin/src/main/java/org/opendaylight/openflowplugin/openflow/md/core/session/SessionContextOFImpl.java",
        "patchSetId": 12
      },
      "lineNbr": 242,
      "author": {
        "id": 556
      },
      "writtenOn": "2015-03-12T14:54:04Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "7a96c907_bdf52658",
      "revId": "f48479d12e3967510599df8fb9bfbb285d8bdf7b",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7a96c907_5de662b1",
        "filename": "openflowplugin/src/main/java/org/opendaylight/openflowplugin/openflow/md/core/session/SessionContextOFImpl.java",
        "patchSetId": 12
      },
      "lineNbr": 251,
      "author": {
        "id": 65
      },
      "writtenOn": "2015-03-03T14:45:33Z",
      "side": 1,
      "message": "whitespaces",
      "revId": "f48479d12e3967510599df8fb9bfbb285d8bdf7b",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5a93c517_1a540353",
        "filename": "openflowplugin/src/main/java/org/opendaylight/openflowplugin/openflow/md/core/session/SessionContextOFImpl.java",
        "patchSetId": 12
      },
      "lineNbr": 251,
      "author": {
        "id": 556
      },
      "writtenOn": "2015-03-12T14:54:04Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "7a96c907_5de662b1",
      "revId": "f48479d12e3967510599df8fb9bfbb285d8bdf7b",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7a96c907_1d045a48",
        "filename": "openflowplugin/src/main/java/org/opendaylight/openflowplugin/openflow/md/util/RoleUtil.java",
        "patchSetId": 12
      },
      "lineNbr": 87,
      "author": {
        "id": 65
      },
      "writtenOn": "2015-03-03T14:45:33Z",
      "side": 1,
      "message": "i think it is supposed to be createRoleRequestInput? not create*Rule*?",
      "revId": "f48479d12e3967510599df8fb9bfbb285d8bdf7b",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7a96c907_60c851a8",
        "filename": "openflowplugin/src/main/java/org/opendaylight/openflowplugin/openflow/md/util/RoleUtil.java",
        "patchSetId": 12
      },
      "lineNbr": 87,
      "author": {
        "id": 556
      },
      "writtenOn": "2015-03-03T14:53:37Z",
      "side": 1,
      "message": "sure - typpo",
      "parentUuid": "7a96c907_1d045a48",
      "revId": "f48479d12e3967510599df8fb9bfbb285d8bdf7b",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5a93c517_3a51bf62",
        "filename": "openflowplugin/src/main/java/org/opendaylight/openflowplugin/openflow/md/util/RoleUtil.java",
        "patchSetId": 12
      },
      "lineNbr": 87,
      "author": {
        "id": 556
      },
      "writtenOn": "2015-03-12T14:54:04Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "7a96c907_60c851a8",
      "revId": "f48479d12e3967510599df8fb9bfbb285d8bdf7b",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7a96c907_9d970aec",
        "filename": "openflowplugin/src/main/java/org/opendaylight/openflowplugin/openflow/md/util/RoleUtil.java",
        "patchSetId": 12
      },
      "lineNbr": 106,
      "author": {
        "id": 65
      },
      "writtenOn": "2015-03-03T14:45:33Z",
      "side": 1,
      "message": "need to be fixed once above method name refactored.",
      "revId": "f48479d12e3967510599df8fb9bfbb285d8bdf7b",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5a93c517_da4d3bc6",
        "filename": "openflowplugin/src/main/java/org/opendaylight/openflowplugin/openflow/md/util/RoleUtil.java",
        "patchSetId": 12
      },
      "lineNbr": 106,
      "author": {
        "id": 556
      },
      "writtenOn": "2015-03-12T14:54:04Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "7a96c907_9d970aec",
      "revId": "f48479d12e3967510599df8fb9bfbb285d8bdf7b",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7a96c907_7da23e4c",
        "filename": "openflowplugin/src/test/java/org/opendaylight/openflowplugin/openflow/md/core/HandshakeManagerImplTest.java",
        "patchSetId": 12
      },
      "lineNbr": 50,
      "author": {
        "id": 65
      },
      "writtenOn": "2015-03-03T14:45:33Z",
      "side": 1,
      "message": "whitespaces",
      "revId": "f48479d12e3967510599df8fb9bfbb285d8bdf7b",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5a93c517_fa4a77ab",
        "filename": "openflowplugin/src/test/java/org/opendaylight/openflowplugin/openflow/md/core/HandshakeManagerImplTest.java",
        "patchSetId": 12
      },
      "lineNbr": 50,
      "author": {
        "id": 556
      },
      "writtenOn": "2015-03-12T14:54:04Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "7a96c907_7da23e4c",
      "revId": "f48479d12e3967510599df8fb9bfbb285d8bdf7b",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7a96c907_1d8bfac3",
        "filename": "openflowplugin/src/test/java/org/opendaylight/openflowplugin/openflow/md/core/HandshakeManagerImplTest.java",
        "patchSetId": 12
      },
      "lineNbr": 53,
      "author": {
        "id": 65
      },
      "writtenOn": "2015-03-03T14:45:33Z",
      "side": 1,
      "message": "whitespaces",
      "revId": "f48479d12e3967510599df8fb9bfbb285d8bdf7b",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5a93c517_9ac7b312",
        "filename": "openflowplugin/src/test/java/org/opendaylight/openflowplugin/openflow/md/core/HandshakeManagerImplTest.java",
        "patchSetId": 12
      },
      "lineNbr": 53,
      "author": {
        "id": 556
      },
      "writtenOn": "2015-03-12T14:54:04Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "7a96c907_1d8bfac3",
      "revId": "f48479d12e3967510599df8fb9bfbb285d8bdf7b",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7a96c907_3d8836c4",
        "filename": "openflowplugin/src/test/java/org/opendaylight/openflowplugin/openflow/md/core/HandshakeManagerImplTest.java",
        "patchSetId": 12
      },
      "lineNbr": 78,
      "author": {
        "id": 65
      },
      "writtenOn": "2015-03-03T14:45:33Z",
      "side": 1,
      "message": "whitespaces",
      "revId": "f48479d12e3967510599df8fb9bfbb285d8bdf7b",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5a93c517_baccef36",
        "filename": "openflowplugin/src/test/java/org/opendaylight/openflowplugin/openflow/md/core/HandshakeManagerImplTest.java",
        "patchSetId": 12
      },
      "lineNbr": 78,
      "author": {
        "id": 556
      },
      "writtenOn": "2015-03-12T14:54:04Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "7a96c907_3d8836c4",
      "revId": "f48479d12e3967510599df8fb9bfbb285d8bdf7b",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7a96c907_dd9032ef",
        "filename": "openflowplugin/src/test/java/org/opendaylight/openflowplugin/openflow/md/core/HandshakeManagerImplTest.java",
        "patchSetId": 12
      },
      "lineNbr": 80,
      "author": {
        "id": 65
      },
      "writtenOn": "2015-03-03T14:45:33Z",
      "side": 1,
      "message": "whitespaces",
      "revId": "f48479d12e3967510599df8fb9bfbb285d8bdf7b",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5a93c517_5ad12bcc",
        "filename": "openflowplugin/src/test/java/org/opendaylight/openflowplugin/openflow/md/core/HandshakeManagerImplTest.java",
        "patchSetId": 12
      },
      "lineNbr": 80,
      "author": {
        "id": 556
      },
      "writtenOn": "2015-03-12T14:54:04Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "7a96c907_dd9032ef",
      "revId": "f48479d12e3967510599df8fb9bfbb285d8bdf7b",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7a96c907_fd8deed3",
        "filename": "openflowplugin/src/test/java/org/opendaylight/openflowplugin/openflow/md/core/HandshakeManagerImplTest.java",
        "patchSetId": 12
      },
      "lineNbr": 85,
      "author": {
        "id": 65
      },
      "writtenOn": "2015-03-03T14:45:33Z",
      "side": 1,
      "message": "whitespaces",
      "revId": "f48479d12e3967510599df8fb9bfbb285d8bdf7b",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5a93c517_7ad667c7",
        "filename": "openflowplugin/src/test/java/org/opendaylight/openflowplugin/openflow/md/core/HandshakeManagerImplTest.java",
        "patchSetId": 12
      },
      "lineNbr": 85,
      "author": {
        "id": 556
      },
      "writtenOn": "2015-03-12T14:54:04Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "7a96c907_fd8deed3",
      "revId": "f48479d12e3967510599df8fb9bfbb285d8bdf7b",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    }
  ]
}